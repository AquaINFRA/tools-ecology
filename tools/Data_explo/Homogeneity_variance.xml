<tool id="ecology_homogeneity" name="Variance homogeneity" version="@VERSION@" profile = "20.01">
    <description>Show the homogeneity of the variance</description>
    <macros>
        <import>macro.xml</import>
    </macros>
    <requirements> 
        <requirement type="package" version="3.3.3">r-ggplot2</requirement>
        <requirement type="package" version="3.0_10">r-car</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        Rscript
            '$__tool_directory__/graph_homogeneity_variance.r'
            '$input'
            '$colnames'
            '$date'
            '$species'
            '$variable'
            '$output'
            '$plots'
        ]]>
        </command>
        <inputs>
            <expand macro="explo_input"/>
            <param name="date" label="Select column containing dates " type="data_column" data_ref="input"/>
            <param name="species" label="Select column containing species " type="data_column" data_ref="input"/>
            <param name="variable" label="Select column containing numeric values " type="data_column" data_ref="input" numerical="True"/>
        </inputs>
        <outputs>
            <data name="output" from_work_dir="levene.txt" format="txt"/>
                <collection type="list" name="plots">
                        <discover_datasets pattern="(?P&lt;designation&gt;.+)\.png" visible="false" format="png"/>
                </collection>
        </outputs>
        <tests>
            <test>
                <param name="input" value="data_frenchbbs.tabular"/>
                <param name="colnames" value="true"/>
                <param name="date" value="1"/>
                <param name="species" value="3"/>
                <param name="variable" value="4"/>
                <output name="output" value="test_bbs2.txt"/>
                <output_collection name="plots" type="list" count="1">
                    <element name="graph_homog" ftype="png">
                        <assert_contents>
                            <has_text text="PNG"/>
                        </assert_contents>
                    </element>
                </output_collection>               
            </test>
        </tests>
        <expand macro="topic"/>        
        <help><![CDATA[
===================================
Calculate the variance homogeneity
===================================

**What it does**
This tool computes variances of factors of the species according the dates data:
- Multiple graph with boxplot

**Input description**
A tabular file with observation data. Must at least contain three columns
which associate date, specie and a factor.

+----------+-----------+--------------+
|   date   |   factor  | species.code |
+==========+===========+==============+
|   year   |  numeric  |   speciesID  |
+----------+-----------+--------------+
|  ...     |    ...    |      ...     |
+----------+-----------+--------------+

**Output**
A  png file with multiple graph with a for each year boxplot.
|

    ]]></help>   
<expand macro="explo_bibref"/>  
               
</tool>
