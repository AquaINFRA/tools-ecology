<tool id="xarray_metadata_info" name="Netcdf Metadata Info" version="0.15.1">
    <description>summarize content of a Netcdf file</description>
    <requirements>
        <requirement type="package" version="3">python</requirement>
        <requirement type="package" version="1.5.3">netcdf4</requirement>
        <requirement type="package" version="0.15.1">xarray</requirement> 
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        python3 '$__tool_directory__/xarray_tool.py' '$input' --info '$info' --summary '$output'
    ]]></command>
    <inputs>
        <param type="data" name="input" label="Netcdf file" format="netcdf,h5" help="Netcdf file you need information about."/>
    </inputs>
    <outputs>
        <data name="output" format="tabular" label="Metadata infos from ${input.name}" from_work_dir="variables.tabular"/>
        <data name="info" label="info file" format="txt"/>
    </outputs>
    <tests>
        <test>
             <param name="input" value="dataset-ibi-reanalysis-bio-005-003-monthly-regulargrid_1510914389133.nc"/>
             <param name="output" value="Metadata_infos_from_dataset-ibi-reanalysis-bio-005-003-monthly-regulargrid_1510914389133.nc.Variables.tab"/>
             <output name="info" value="info_file.txt" compare="sim_size" delta="10"/>
             <output name="output" ftype="tabular" file="Metadata_infos_from_dataset-ibi-reanalysis-bio-005-003-monthly-regulargrid_1510914389133.nc.Variables.tab" compare="sim_size" delta="10"/>
        </test>
    </tests>  
    <help><![CDATA[
**What it does**

First the tool will give general information about the input in a 'info file' output. (command $ncdump -h inputfile)

Then, a general tabular 'variables' summarize dimensions details inside each available variable.


The summary tabular file has the general structure :


    Variable1    Var1_Number_of_Dim    Dim1    Dim1_size   ...    DimN    DimN_size    
 
    VariableX    VarX_Number_of_Dim    DimX1   DimX1_size  ...    DimXN   DimXN_size   

    ...                                                                              


**Input**

A netcdf file (xxx.nc).

**Outputs**

An Information file.

A summary tabular file.


--------------------------------
 
The Netcdf Info tool use the netcdf functions : https://www.unidata.ucar.edu/software/netcdf/docs/index.html

Run this tool before considering using Netcdf Read.
    ]]></help>

</tool>
